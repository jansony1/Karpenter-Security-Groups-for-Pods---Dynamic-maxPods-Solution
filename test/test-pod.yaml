apiVersion: v1
kind: Pod
metadata:
  name: test-dynamic-maxpods-v2
  labels:
    app: test-dynamic-maxpods
    version: v2
spec:
  nodeSelector:
    node-type: m5-dynamic-v2
  containers:
  - name: nginx-container
    image: nginx:alpine
    resources:
      requests:
        cpu: 2500m    # 2.5 cores - force m5.xlarge or larger instance
        memory: 4Gi   # 4GB memory
      limits:
        cpu: 3000m
        memory: 6Gi
    ports:
    - containerPort: 80
    readinessProbe:
      httpGet:
        path: /
        port: 80
      initialDelaySeconds: 5
      periodSeconds: 10
